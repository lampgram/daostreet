{"version":3,"file":"dashboard-accounts.cf19b955de749ee695ac.js","sources":["webpack:///dashboard-accounts.cf19b955de749ee695ac.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{2175:function(e,t,n){\"use strict\";var a=n(0),r=n.n(a),o=n(2188),i=n.n(o),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),s(t,[{key:\"componentDidMount\",value:function(){this.enableAnimation()}},{key:\"resetAnimation\",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:\"enableAnimation\",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:\"componentWillUnmount\",value:function(){clearTimeout(this.timer),this.timer=null}},{key:\"render\",value:function(){return this.props.children?r.a.createElement(i.a,{id:this.props.id,className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):r.a.createElement(this.props.component)}}]),t}();c.defaultProps={component:\"span\",enterTimeout:2e3},t.a=c},2176:function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return _}),n.d(t,\"a\",function(){return v});var a=n(0),r=n.n(a),o=n(1),i=n.n(o),s=n(3),c=n.n(s),l=n(28),u=n(25),p=n(23),h=n(5),m=n.n(h),d=n(2339),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function y(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function b(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=function(e){function t(){return g(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,r.a.Component),f(t,[{key:\"render\",value:function(){var e=this.props,t=e.isActive,n=e.index,a=e.changeTab,o=e.title,i=e.className,s=e.updatedTab,l=e.disabled,u=e.subText,p=c()({\"is-active\":t},i);return\"string\"==typeof o&&o.indexOf(\".\")>0&&(o=m.a.translate(o)),this.props.collapsed?(\"string\"==typeof u&&(u=u.trim()),\"span\"===o.type&&(o=o.props.children[2]),r.a.createElement(\"option\",{value:n,\"data-is-link-to\":this.props.isLinkTo},o,s?\"*\":\"\",u&&\" (\",u&&u,u&&\")\")):r.a.createElement(\"li\",{className:p,onClick:l?null:a.bind(this,n,this.props.isLinkTo)},r.a.createElement(\"a\",null,r.a.createElement(\"span\",{className:\"tab-title\"},o,s?\"*\":\"\"),u&&r.a.createElement(\"div\",{className:\"tab-subtext\"},u)))}}]),t}();v.propTypes={changeTab:i.a.func,isActive:i.a.bool.isRequired,index:i.a.number.isRequired,className:i.a.string,isLinkTo:i.a.string,subText:i.a.oneOfType([i.a.object,i.a.string])},v.defaultProps={isActive:!1,index:0,className:\"\",isLinkTo:\"\",subText:null};var _=function(e){function t(e){g(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},n._setDimensions=n._setDimensions.bind(n),n}return b(t,r.a.Component),f(t,[{key:\"componentDidMount\",value:function(){this._setDimensions(),window.addEventListener(\"resize\",this._setDimensions,{capture:!1,passive:!0})}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this._setDimensions)}},{key:\"_setDimensions\",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:\"_changeTab\",value:function(e,t){e!==this.state.activeTab&&(\"\"!==t&&this.props.history.push(t),this.props.setting&&u.a.changeViewSetting(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:\"render\",value:function(){var e=this,t=this.props,n=t.children,a=t.contentClass,o=t.tabsClass,i=t.style,s=t.segmented,l=this.state.width<900&&r.a.Children.count(n)>2,u=null,p=r.a.Children.map(n,function(t,n){if(!t)return null;if(l&&t.props.disabled)return null;var a=n===e.state.activeTab;return a&&(u=t.props.children),r.a.cloneElement(t,{collapsed:l,isActive:a,changeTab:e._changeTab.bind(e),index:n})}).filter(function(e){return null!==e});return u||(u=p[0].props.children),r.a.createElement(\"div\",{className:c()(this.props.actionButtons?\"with-buttons\":\"\",this.props.className)},r.a.createElement(\"div\",{className:\"service-selector\"},r.a.createElement(\"ul\",{style:i,className:c()(\"button-group no-margin\",o,{segmented:s})},l?r.a.createElement(\"li\",{style:{paddingLeft:10,paddingRight:10,minWidth:\"15rem\"}},r.a.createElement(\"select\",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:\"bts-select\",onChange:function(t){var n=parseInt(t.target.value,10);e._changeTab(n,t.target[n].attributes[\"data-is-link-to\"].value)}},p)):p,this.props.actionButtons?r.a.createElement(\"li\",{className:\"tabs-action-buttons\"},this.props.actionButtons):null)),r.a.createElement(\"div\",{className:c()(\"tab-content\",a)},u))}}]),t}();_.propTypes={setting:i.a.string,defaultActiveTab:i.a.number,segmented:i.a.bool},_.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:\"\",style:{}},_=Object(l.a)(_,{listenTo:function(){return[p.a]},getProps:function(){return{viewSettings:p.a.getState().viewSettings}}}),_=Object(d.a)(_)},2182:function(e,t,n){\"use strict\";var a=n(0),r=n.n(a),o=n(4),i=n(5),s=n.n(i),c=n(2175),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={page:1,pageSize:e.pageSize},n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),l(t,[{key:\"onChange\",value:function(e,t){this.setState({page:e,pageSize:t})}},{key:\"render\",value:function(){var e=this,t=this.state,n=t.page,a=t.pageSize,i=this.props,l=i.header,u=i.rows,p=i.extraRow,h=u.length,m=d(n,a);function d(e,t){for(var n=[],a=(e-1)*t;a<Math.min(h,e*t);a++)n.push(u[a]);return n}return!m.length&&h&&(m=d(1,a)),r.a.createElement(\"div\",{className:\"grid-content\",style:this.props.style},r.a.createElement(\"table\",{className:this.props.className},l?r.a.createElement(\"thead\",null,l):null,this.props.withTransition&&1===n?r.a.createElement(c.a,{component:\"tbody\",transitionName:\"newrow\"},m,p):r.a.createElement(\"tbody\",null,m,p)),h>a?r.a.createElement(o.Pagination,{style:{paddingTop:\"1rem\",paddingBottom:\"1rem\",paddingLeft:this.props.leftPadding||null},total:h,showTotal:function(t){return s.a.translate(e.props.label,{count:t})},pageSize:a,current:n,onChange:this.onChange.bind(this)}):null,this.props.children)}}]),t}();u.defaultProps={rows:[],pageSize:15,label:\"utility.total_x_items\",className:\"table\",extraRow:null,style:{paddingBottom:\"1rem\"}},t.a=u},2192:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return H});var a=n(0),r=n.n(a),o=n(2),i=n.n(o),s=n(360),c=n(589),l=n(34),u=n(41),p=n(13),h=n(6),m=n(2178),d=n.n(m),f=n(5),g=n.n(f),y=n(20),b=n(3),v=n.n(b),_=n(1),w=n.n(_),E=n(2182),k=n(2198),A=n.n(k),S=n(44),O=n(4),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function x(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function T(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function j(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=h.ChainTypes.operations,P={textAlign:\"left\"},L=Object.keys(N);function I(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}var H=function(e){function t(e){x(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={limit:e.limit,fetchingAccountHistory:!1,headerHeight:85,filter:\"all\",accountHistoryError:!1},n}return j(t,r.a.Component),C(t,[{key:\"componentDidMount\",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;d.a.initialize(e),this._setHeaderHeight()}}},{key:\"_setHeaderHeight\",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:\"shouldComponentUpdate\",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.fetchingAccountHistory!==this.state.fetchingAccountHistory)return!0;for(var n=0;n<e.accountsList.length;++n){var a=e.accountsList[n],r=this.props.accountsList[n];if(a&&r&&a.get(\"history\")!==r.get(\"history\"))return!0}return!1}},{key:\"_onIncreaseLimit\",value:function(){this.setState({limit:this.state.limit+30})}},{key:\"_getHistory\",value:function(e,t,n){var a=[],r=new Set,o=!0,i=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;if(u){var p=u.get(\"history\");p&&(a=a.concat(p.toJS().filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return t&&(a=a.filter(function(e){return e.op[0]===N[t]})),n&&(a=a.filter(function(e){return n.fields.reduce(function(t,a){switch(a){case\"asset_id\":return t&&e.op[1].amount[a]===n.values[a];default:return t&&e.op[1][a]===n.values[a]}},!0)})),a}},{key:\"_getAccountHistoryES\",value:function(e,t,n){var a=\"https://wrapper.elasticsearch.bitshares.ws\";return console.log(\"query\",a+\"/get_account_history?account_id=\"+e+\"&from_=\"+n+\"&size=\"+t+\"&sort_by=block_data.block_time&type=data&agg_field=operation_type\"),new Promise(function(r,o){fetch(a+\"/get_account_history?account_id=\"+e+\"&from_=\"+n+\"&size=\"+t+\"&sort_by=block_data.block_time&type=data&agg_field=operation_type\").then(function(e){return e.json()}).then(function(e){var t=e.map(function(e){return{id:e.account_history.operation_id,op:{type:e.operation_type,data:e.operation_history.op_object},result:JSON.parse(e.operation_history.operation_result),block_num:e.block_data.block_num,block_time:e.block_data.block_time+\"Z\"}});r(t)}).catch(function(e){console.warn(\"query failed\",e),r([])})})}},{key:\"_generateCSV\",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a(\"next\",e)},function(e){a(\"throw\",e)});e(s)}(\"next\")})}}(regeneratorRuntime.mark(function e(){var t,n,a,r,o,i,c,l,u,p,m,d,f,g,y,b,v,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e,t){for(var n=\"\"+e;n.length<t;)n=\"0\"+n;return n},this.setState({fetchingAccountHistory:!0}),t=0,n=150,a=this.props.accountsList[0].get(\"id\"),e.next=7,Object(h.FetchChain)(\"getAccount\",a);case 7:r=e.sent.get(\"name\"),o={};case 9:return e.next=12,this._getAccountHistoryES(a,n,t);case 12:if((c=e.sent).length){e.next=15;break}return e.abrupt(\"break\",23);case 15:return e.next=17,A.a.resolveBlockTimes(c);case 17:return e.next=19,A.a.resolveAssets(c);case 19:c.map(function(e){var t=e.id,n=L[e.op.type],a=e.op.data;switch(n){case\"vesting_balance_withdraw\":case\"transfer\":a.amount=a.amount_}o[t]={timestamp:new Date(e.block_time),type:n,data:a}}),t+=c.length,e.next=9;break;case 23:if(Object.keys(o).length){e.next=25;break}return e.abrupt(\"return\",this.setState({fetchingAccountHistory:!1,accountHistoryError:!0}));case 25:for(o=A.a.groupEntries(o),l=A.a.parseData(o,a,r),u=function(e){return(\"0\"+e.getDate()).slice(-2)+\".\"+(\"0\"+(e.getMonth()+1)).slice(-2)+\".\"+e.getFullYear()+\" \"+(\"0\"+e.getHours()).slice(-2)+\":\"+(\"0\"+e.getMinutes()).slice(-2)+\":\"+(\"0\"+e.getSeconds()).slice(-2)+\" GMT\"+(e.getTimezoneOffset()<0?\"+\":\"-\")+i(parseInt(Math.floor(Math.abs(e.getTimezoneOffset()/60))),2)+i(Math.abs(e.getTimezoneOffset()%60),2)},p=\"\",m=!0,d=!1,f=void 0,e.prev=32,g=l[Symbol.iterator]();!(m=(y=g.next()).done);m=!0)(b=y.value).length>=11&&b[10]instanceof Date&&(b[10]=u(b[10])),p+=b.join(\",\")+\"\\n\";e.next=40;break;case 36:e.prev=36,e.t0=e.catch(32),d=!0,f=e.t0;case 40:e.prev=40,e.prev=41,!m&&g.return&&g.return();case 43:if(e.prev=43,!d){e.next=46;break}throw f;case 46:return e.finish(43);case 47:return e.finish(40);case 48:v=new Blob([p],{type:\"text/csv;charset=utf-8\"}),_=new Date,Object(s.saveAs)(v,\"bitshares-account-history-\"+r+\"-\"+_.getFullYear()+\"-\"+(\"0\"+(_.getMonth()+1)).slice(-2)+\"-\"+(\"0\"+_.getDate()).slice(-2)+\"-\"+(\"0\"+_.getHours()).slice(-2)+(\"0\"+_.getMinutes()).slice(-2)+\".csv\"),this.setState({fetchingAccountHistory:!1,accountHistoryError:null});case 52:case\"end\":return e.stop()}},e,this,[[32,36,40,48],[41,,43,47]])}));return function(){return e.apply(this,arguments)}}()},{key:\"_onChangeFilter\",value:function(e){this.setState({filter:e.target.value})}},{key:\"render\",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,a=e.filter,o=e.customFilter,s=e.style,l=e.maxHeight,u=this.state,p=u.limit,h=u.headerHeight,m=1===t.length&&t[0]?t[0].get(\"id\"):null,d=this._getHistory(t,this.props.showFilters&&\"all\"!==this.state.filter?this.state.filter:a,o).sort(I),f=d.length;s=s||{width:\"100%\",height:\"100%\"};var b=null;b=[\"all\",\"transfer\",\"limit_order_create\",\"limit_order_cancel\",\"fill_order\",\"account_create\",\"account_update\",\"asset_create\",\"witness_withdraw_pay\",\"vesting_balance_withdraw\"].map(function(e){return r.a.createElement(\"option\",{value:e,key:e},g.a.translate(\"transaction.trxTypes.\"+e))});var _=d.length?d.slice(0,p).map(function(e){return r.a.createElement(c.a,{includeOperationId:!0,operationId:e.id,style:P,key:e.id,op:e.op,result:e.result,txIndex:e.trx_in_block,block:e.block_num,current:m,hideFee:!1,inverted:!1,hideOpLabel:n,fullDate:!0})}):[r.a.createElement(\"tr\",{key:\"no_recent\"},r.a.createElement(\"td\",{colSpan:n?\"2\":\"3\"},r.a.createElement(i.a,{content:\"operation.no_recent\"})))],w=r.a.createElement(\"tr\",{className:\"total-value\",key:\"total_value\"},r.a.createElement(\"td\",{style:{textAlign:\"center\"}},\"Â \"),r.a.createElement(\"td\",null),r.a.createElement(\"td\",null),r.a.createElement(\"td\",null),r.a.createElement(\"td\",null));return r.a.createElement(\"div\",{className:\"recent-transactions no-overflow\",style:s},r.a.createElement(\"div\",{className:\"generic-bordered-box\"},this.props.dashboard?null:r.a.createElement(\"div\",{ref:\"header\"},r.a.createElement(\"div\",{className:\"block-content-header\"},r.a.createElement(\"span\",null,this.props.title?this.props.title:r.a.createElement(i.a,{content:\"account.recent\"})))),r.a.createElement(\"div\",{className:\"header-selector\"},r.a.createElement(\"div\",{className:\"selector\"},r.a.createElement(\"div\",{className:v()(\"inline-block\")},this.props.showFilters?r.a.createElement(O.Tooltip,{placement:\"bottom\",title:g.a.translate(\"tooltip.filter_ops\")},r.a.createElement(\"select\",{style:{paddingTop:5,width:\"auto\"},className:\"bts-select no-margin\",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},b)):null),f>0?r.a.createElement(O.Tooltip,{placement:\"bottom\",title:g.a.translate(\"transaction.csv_tip\")},r.a.createElement(\"a\",{className:\"inline-block\",onClick:this._generateCSV.bind(this),style:{marginLeft:\"1rem\"}},r.a.createElement(y.a,{name:\"excel\",size:\"1_5x\"}))):null),this.state.accountHistoryError&&r.a.createElement(\"div\",{className:\"has-error\",style:{paddingLeft:\"0.75rem\"}},r.a.createElement(i.a,{content:\"account.history_error\"}))),r.a.createElement(\"div\",{className:\"box-content grid-block no-margin\",style:this.props.fullHeight?null:{maxHeight:l-h},ref:\"transactions\"},r.a.createElement(E.a,{withTransition:!0,className:\"table table-striped \"+(n?\"compact\":\"\")+(this.props.dashboard?\" dashboard-table table-hover\":\"\"),header:r.a.createElement(\"tr\",null,r.a.createElement(\"th\",{className:\"column-hide-tiny\",style:P},r.a.createElement(i.a,{content:\"account.transactions.id\"})),r.a.createElement(\"th\",{className:\"column-hide-tiny\",style:P},r.a.createElement(i.a,{content:\"account.transactions.type\"})),r.a.createElement(\"th\",{style:P},r.a.createElement(i.a,{content:\"account.transactions.info\"})),r.a.createElement(\"th\",{style:P},r.a.createElement(i.a,{content:\"account.transactions.fee\"})),r.a.createElement(\"th\",null,r.a.createElement(i.a,{content:\"account.transactions.time\"}))),rows:_,label:\"utility.total_x_operations\",extraRow:w})),this.state.fetchingAccountHistory&&r.a.createElement(S.a,null)))}}]),t}();H.propTypes={accountsList:l.a.ChainAccountsList.isRequired,compactView:w.a.bool,limit:w.a.number,maxHeight:w.a.number,fullHeight:w.a.bool,showFilters:w.a.bool},H.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},H=Object(u.a)(H);var D=function(e){function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,r.a.Component),C(t,[{key:\"render\",value:function(){return r.a.createElement(\"span\",{className:\"wrapper\"},this.props.children(this.props))}}]),t}();D.propTypes={asset:l.a.ChainAsset.isRequired,to:l.a.ChainAccount.isRequired,fromAccount:l.a.ChainAccount.isRequired},D.defaultProps={asset:\"1.3.0\"},D=Object(u.a)(D)},2198:function(e,t,n){var a=n(2199),r=a.groupEntries,o=a.parseData,i=n(2201),s=i.resolveBlockTimes,c=i.resolveAssets,l=n(2203)(!0),u=l.getAccountHistoryES,p=l.getAccountHistory;e.exports={groupEntries:r,parseData:o,getAccountHistoryES:u,getAccountHistory:p,resolveBlockTimes:s,resolveAssets:c}},2199:function(e,t,n){var a=n(26),r=n(2200),o={},i={},s={};function c(e,t,n,a){o[e]||(o[e]=[]),i[e]||(i[e]=[]),o[e].push(t),i[e].push([n,t,new Date(a)]),s[e]||(s[e]={}),s[e][n]||(s[e][n]={deposit:[],withdrawal:[]}),s[e][n][t>0?\"deposit\":\"withdrawal\"].push(t)}function l(e,t,n,a,o,i,s,l,u){return n||(n={amount:\"\",currency:\"\"}),a||(a={amount:\"\",currency:\"\"}),o||(o={amount:\"\",currency:\"\"}),n.amount&&c(n.currency,n.amount,s,i),a.amount&&c(a.currency,-a.amount,s,i),o.amount&&c(o.currency,-o.amount,s,i),e.push([t,r.printAmount(n),n.currency,r.printAmount(a),a.currency,r.printAmount(o),o.currency,\"BTS-DEX\",u||\"\",l||\"\",i]),e}e.exports={parseData:function(e,t,n){var a=[];a.push([\"Type\",\"Buy Amount\",\"Buy Currency\",\"Sell Amount\",\"Sell Currency\",\"Fee Amount\",\"Fee Currency\",\"Exchange\",\"Trade Group\",\"Comment\",\"Date\"]);var o={};function i(e){o[e]||(o[e]=0),o[e]++}var s=Object.keys(e),c=Array.isArray(s),u=0;for(s=c?s:s[Symbol.iterator]();;){var p;if(c){if(u>=s.length)break;p=s[u++]}else{if((u=s.next()).done)break;p=u.value}var h=e[p],m=h.timestamp,d=h.type,f=h.data,g=null;switch(d){case\"vesting_balance_withdraw\":var y=r.parseCurrency(f.amount);g=r.parseCurrency(f.fee),a=l(a,\"1.2.30665\"===f.owner&&y.amount>1e4?\"Income\":\"Deposit\",y,null,g,m,d,n+\" : Vesting balance withdraw\"),i(d);break;case\"balance_claim\":a=l(a,\"Deposit\",r.parseCurrency(f.total_claimed),null,null,m,d,n+\" : Balance claim\"),i(d);break;case\"transfer\":var b=r.parseCurrency(f.amount);g=r.parseCurrency(f.fee),a=f.to==t?l(a,\"1.2.391938\"===f.to&&\"1.2.381086\"===f.from?\"Income\":\"Deposit\",b,null,null,m,d,n+\" : From \"+f.from):l(a,\"Withdrawal\",null,b,g,m,d,n+\": To \"+f.to),i(d);break;case\"fill_order\":var v=r.parseCurrency(f.pays),_=r.parseCurrency(f.receives);\"BTS\"!==(g=r.parseCurrency(f.fee)).currency&&(_.currency===g.currency?(_.amount-=g.amount,g.amount=0):v.currency===g.currency&&(v.amount-=g.amount,g.amount=0)),a=l(a,\"Trade\",_,v,g,m,d),i(d);break;case\"asset_issue\":var w=r.parseCurrency(f.asset_to_issue);g=f.issuer===t?r.parseCurrency(f.fee):null,f.issue_to_account===t&&(a=l(a,\"Deposit\",w,null,g,m,d,n+\" : Issued to account\")),i(d);break;case\"account_update\":case\"proposal_create\":case\"proposal_update\":case\"account_whitelist\":case\"worker_create\":case\"limit_order_create\":case\"limit_order_cancel\":case\"call_order_update\":(g=r.parseCurrency(f.fee)).amount>0&&(a=l(a,\"Withdrawal\",null,g,null,m,d,d+\" fee\"),i(d));break;case\"account_create\":f.registrar===t&&(a=l(a,\"Withdrawal\",null,g=r.parseCurrency(f.fee),null,m,d,d+\" fee\"),i(d));break;case\"asset_fund_fee_pool\":g=r.parseCurrency(f.fee),a=l(a,\"Withdrawal\",null,r.parseCurrency({amount:f.amount,asset_id:\"1.3.0\"}),g,m,d,\"\"+d),i(d);break;default:console.log(\"Unhandled type:\",d,f)}}return a},filterEntries:function(e,t,n){if(!t&&!n)return e;for(var a=Object.keys(e),r=a.length-1;r>=0;r--){var o=a[r],i=e[o],s=i.timestamp,c=i.type;i.data,t&&c!==t?delete e[o]:n&&new Date(s).getTime()<n&&delete e[o]}return console.log(\"Removed \"+(a.length-Object.keys(e).length)+\" entries by filtering\"),e},groupEntries:function(e){for(var t={},n=Object.keys(e),r=n.length-1;r>=0;r--){var o=n[r],i=e[o],s=i.timestamp,c=i.type,l=i.data;switch(c){case\"fill_order\":var u=a(s),p=l.receives.asset_id+\"_\"+l.pays.asset_id,h=t[p],m=h?a(h.timestamp):null;h&&u.isSame(m,\"day\")&&h.data.pays.asset_id===l.pays.asset_id&&h.data.receives.asset_id===l.receives.asset_id&&(l.pays.amount=parseInt(l.pays.amount,10)+parseInt(h.data.pays.amount,10),l.receives.amount=parseInt(l.receives.amount,10)+parseInt(h.data.receives.amount,10),l.fee.amount=parseInt(l.fee.amount,10)+parseInt(h.data.fee.amount,10),e[o].data=l,delete e[h.trx_id]),t[p]={data:l,timestamp:s,trx_id:o}}}return console.log(\"Removed \"+(n.length-Object.keys(e).length)+\" fill_order entries by grouping\"),e}}},2200:function(e,t,n){var a=n(6).ChainStore;e.exports={parseCurrency:function(e){var t=a.getAsset(e.asset_id),n=function(e){if(\"number\"!=typeof e)throw new Error(\"Input must be a number\");return Math.pow(10,e)}((t=t?t.toJS():{precision:5}).precision);return{amount:e.amount/n,currency:t.symbol,asset_id:e.asset_id}},printAmount:function(e){if(!e.amount||!e.currency)return\"\";var t=a.getAsset(e.asset_id);return t=t?t.toJS():{precision:5},e.amount.toFixed(t.precision)},getIndex:function(e){var t=e.split(\".\");return parseInt(t[2],10)}}},2201:function(e,t,n){var a=n(2202),r=n(15),o=n(6),i=o.ChainTypes,s=o.ChainStore,c=o.FetchChain,l=i.operations,u=Object.keys(l),p={},h={};function m(e){return new Promise(function(t,n){if(p[e])return t(p[e]);r.Apis.instance().db_api().exec(\"get_block\",[e]).then(function(n){p[e]=new Date(n.timestamp+\"Z\"),t(p[e])}).catch(n)})}function d(e){return new Promise(function(t,n){var a;if(h[e])return t(h[e]);c(\"getObject\",e,void 0,(a={},a[e]=!1,a)).then(function(n){var a=n.toJS();h[e]={symbol:a.symbol.replace(/OPEN\\.|BRIDGE\\.|RUDEX\\.|GDEX\\.|BLOCK\\./,\"\"),precision:a.precision},t(h[e])}).catch(function(e){n()})})}e.exports={connect:function(){return new Promise(function(e){r.Apis.instance(a.apiNode,!0).init_promise.then(function(t){s.init(!1).then(function(){e(t)})}).catch(function(e){console.error(\"Error connection to node:\",e)})})},disconnect:function(){r.Apis.instance().close()},getUser:function(e){return new Promise(function(t,n){var a;c(\"getAccount\",e,void 0,(a={},a[e]=!1,a)).then(function(e){var n=e.toJS();n.balances||(n.balances={}),n.call_orders||(n.call_orders=[]);var a=Object.keys(n.balances);t({accountId:n.id,assets:a,balances:n.balances})}).catch(n)})},getBlockTime:m,getAssetData:d,resolveAssets:function(e,t){return new Promise(function(n,a){var r=[],o={};e&&e.forEach(function(e){switch(u[e.op[0]]){case\"transfer\":o[e.op[1].amount.asset_id]=!0,o[e.op[1].fee.asset_id]=!0;break;case\"fill_order\":o[e.op[1].pays.asset_id]=!0,o[e.op[1].receives.asset_id]=!0,o[e.op[1].fee.asset_id]=!0;break;case\"asset_issue\":o[e.op[1].asset_to_issue.asset_id]=!0,o[e.op[1].fee.asset_id]=!0}}),t&&t.forEach(function(e){o[e]=!0}),Object.keys(o).forEach(function(e){!h[e]&&e&&r.push(d(e))}),Promise.all(r).then(n).catch(a)})},resolveBlockTimes:function(e){return new Promise(function(t,n){var a=e.map(function(e){return e.block_time&&(p[e.block_num]=new Date(e.block_time)),m(e.block_num)});Promise.all(a).then(t).catch(n)})},getAsset:function(e){return h[e]},getBlock:function(e){return p[e]}}},2202:function(e,t){e.exports={apiNode:\"wss://eu.nodes.bitshares.ws\",useES:!0,esNode:\"https://eswrapper.bitshares.eu\",botPaymentAccounts:[]}},2203:function(e,t,n){var a=n(15),r=void 0;e.exports=function(e){return r=e?fetch:n(2204),{getAccountHistory:function(e,t,n,r){return new Promise(function(o,i){a.Apis.instance().history_api().exec(\"get_account_history\",[e,t,n,r]).then(function(e){o(e)}).catch(i)})},getAccountHistoryES:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"https://eswrapper.bitshares.eu\";return console.log(\"query\",a+\"/get_account_history?account_id=\"+e+\"&from_=\"+n+\"&size=\"+t+\"&sort_by=block_data.block_time&type=data&agg_field=operation_type\"),new Promise(function(o,i){r(a+\"/get_account_history?account_id=\"+e+\"&from_=\"+n+\"&size=\"+t+\"&sort_by=block_data.block_time&type=data&agg_field=operation_type\").then(function(e){return e.json()}).then(function(e){var t=e.map(function(e){return{id:e.account_history.operation_id,op:JSON.parse(e.operation_history.op),result:JSON.parse(e.operation_history.operation_result),block_num:e.block_data.block_num,block_time:e.block_data.block_time+\"Z\"}});o(t)}).catch(function(){o([])})})}}}},2204:function(e,t){},2205:function(e,t,n){\"use strict\";var a=n(0),r=n.n(a),o=n(28),i=n(5),s=n.n(i),c=n(21),l=n(2323),u=n(2),p=n.n(u),h=n(600),m=n(23),d=n(253),f=n(42),g=n(4),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var b=Object(f.h)(),v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={step:1,locales:m.a.getState().defaults.locale,currentLocale:m.a.getState().settings.get(\"locale\")},n.unmounted=!1,n.handleLanguageSelect=n.handleLanguageSelect.bind(n),n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),y(t,[{key:\"componentWillMount\",value:function(){var e=this;Object(h.a)(function(t){e.unmounted||e.setState({incognito:t})})}},{key:\"componentWillUnmount\",value:function(){this.unmounted=!0}},{key:\"onSelect\",value:function(e){this.props.history.push(\"/create-account/\"+e)}},{key:\"handleLanguageSelect\",value:function(e){d.a.switchLocale(e),this.setState({currentLocale:e})}},{key:\"languagesFilter\",value:function(e,t){return t.props.language.toLowerCase().indexOf(e.toLowerCase())>=0}},{key:\"render\",value:function(){var e=n(5),t=r.a.createElement(g.Select,{showSearch:!0,filterOption:this.languagesFilter,value:this.state.currentLocale,onChange:this.handleLanguageSelect,style:{width:\"123px\",marginBottom:\"16px\"}},this.state.locales.map(function(e){return r.a.createElement(g.Select.Option,{key:e,language:s.a.translate(\"languages.\"+e)},s.a.translate(\"languages.\"+e))}));return r.a.createElement(\"div\",{className:\"grid-block align-center\",id:\"accountForm\"},r.a.createElement(\"div\",{className:\"grid-block shrink vertical\"},r.a.createElement(\"div\",{className:\"grid-content shrink text-center account-creation\"},r.a.createElement(\"div\",null,r.a.createElement(\"img\",{src:b,className:\"logo\"})),r.a.createElement(\"div\",null,r.a.createElement(p.a,{content:\"header.create_account\",component:\"h4\"})),r.a.createElement(\"div\",null,r.a.createElement(p.a,{content:\"account.intro_text_title\",component:\"h4\",wallet_name:Object(f.m)()}),r.a.createElement(p.a,{unsafe:!0,content:\"cryptobridge.global.claim\",component:\"p\"}),r.a.createElement(\"div\",{className:\"shrink text-center\"},r.a.createElement(\"div\",{className:\"grp-menu-item overflow-visible account-drop-down\"},r.a.createElement(\"div\",{className:\"grp-menu-item overflow-visible login-selector--language-select\",style:{margin:\"0 auto\"},\"data-intro\":e.translate(\"walkthrough.language_flag\")},r.a.createElement(g.Row,{className:\"login-selector--language-select--wrapper\"},r.a.createElement(g.Col,{span:4},r.a.createElement(g.Icon,{type:\"global\",className:\"login-selector--language-select--icon\"})),r.a.createElement(g.Col,{span:20},t)))))),r.a.createElement(\"div\",{className:\"grid-block account-login-options\"},r.a.createElement(l.a,{id:\"account_register_button\",to:\"/create-account\",className:\"button primary\",\"data-intro\":e.translate(\"walkthrough.create_cloud_wallet\")},r.a.createElement(p.a,{content:\"header.create_account\"})),r.a.createElement(l.a,{id:\"account_login_button\",to:\"/login\",className:\"button hollow primary\",\"data-intro\":e.translate(\"walkthrough.create_cloud_wallet\")},r.a.createElement(p.a,{content:\"header.unlock_short\"}))))))}}]),t}();t.a=Object(o.a)(v,{listenTo:function(){return[c.a]},getProps:function(){return{currentAccount:c.a.getState().currentAccount||c.a.getState().passwordAccount}}})},2340:function(e,t,n){\"use strict\";n.r(t);var a=n(0),r=n.n(a),o=n(11),i=n.n(o),s=n(13),c=n(2),l=n.n(c),u=n(28),p=n(23),h=n(83),m=n(34),d=n(41),f=n(25),g=n(38),y=n(20),b=n(6),v=n(592),_=n(21),w=n(5),E=n.n(w),k=n(18),A=n(2339),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function O(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function C(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function x(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=function(e){function t(e){O(this,t);var n=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={inverseSort:e.viewSettings.get(\"dashboardSortInverse\",!0),sortBy:e.viewSettings.get(\"dashboardSort\",\"star\"),dashboardFilter:e.viewSettings.get(\"dashboardFilter\",\"\")},n}return x(t,r.a.Component),S(t,[{key:\"shouldComponentUpdate\",value:function(e,t){return!s.a.are_equal_shallow(e.accounts,this.props.accounts)||e.isContactsList!==this.props.isContactsList||e.showMyAccounts!==this.props.showMyAccounts||e.width!==this.props.width||e.showIgnored!==this.props.showIgnored||e.locked!==this.props.locked||e.passwordAccount!==this.props.passwordAccount||!s.a.are_equal_shallow(e.starredAccounts,this.props.starredAccounts)||!s.a.are_equal_shallow(t,this.state)}},{key:\"_onStar\",value:function(e,t,n){n.preventDefault(),t?g.a.removeStarAccount(e):g.a.addStarAccount(e)}},{key:\"_goAccount\",value:function(e,t){this.props.history.push(\"/account/\"+e),f.a.changeViewSetting({overviewTab:t})}},{key:\"_createAccount\",value:function(){this.props.history.push(\"/create-account/wallet\")}},{key:\"_onFilter\",value:function(e){this.setState({dashboardFilter:e.target.value.toLowerCase()}),f.a.changeViewSetting({dashboardFilter:e.target.value.toLowerCase()})}},{key:\"_setSort\",value:function(e){var t=e===this.state.sortBy?!this.state.inverseSort:this.state.inverseSort;this.setState({sortBy:e,inverseSort:t}),f.a.changeViewSetting({dashboardSort:e,dashboardSortInverse:t})}},{key:\"_onAddContact\",value:function(e){g.a.addAccountContact(e)}},{key:\"_onRemoveContact\",value:function(e){g.a.removeAccountContact(e)}},{key:\"_renderList\",value:function(e,t){var n=this,a=this.props,o=a.width,c=a.starredAccounts,l=a.isContactsList,u=a.passwordAccount,p=this.state,h=p.dashboardFilter,m=p.sortBy,d=p.inverseSort,f=i.a.List();return e.filter(function(e){if(!e)return!1;var t=e.get(\"name\"),a=_.a.isMyAccount(e)||t===u;return!!l||a===n.props.showMyAccounts}).filter(function(e){return!!e&&-1!==e.get(\"name\").toLowerCase().indexOf(h)}).sort(function(e,t){switch(m){case\"star\":return function(e,t,n,a){var r=e.get(\"name\"),o=t.get(\"name\"),i=a.has(r),c=a.has(o);return i&&!c?n?-1:1:c&&!i?n?1:-1:r>o?n?1:-1:r<o?n?-1:1:s.a.sortText(r,o,!n)}(e,t,d,c);case\"name\":return s.a.sortText(e.get(\"name\"),t.get(\"name\"),d)}}).map(function(e){if(e){var a={},i={},s={};f=f.clear();var p=e.get(\"name\"),h=e.get(\"lifetime_referrer_name\")===p;e.get(\"orders\")&&e.get(\"orders\").forEach(function(e,t){var n=b.ChainStore.getObject(e);if(n){var a=n.getIn([\"sell_price\",\"base\",\"asset_id\"]);s[a]?s[a]+=parseInt(n.get(\"for_sale\"),10):s[a]=parseInt(n.get(\"for_sale\"),10)}}),e.get(\"call_orders\")&&e.get(\"call_orders\").forEach(function(e,t){var n=b.ChainStore.getObject(e);if(n){var r=n.getIn([\"call_price\",\"base\",\"asset_id\"]);a[r]?a[r]+=parseInt(n.get(\"collateral\"),10):a[r]=parseInt(n.get(\"collateral\"),10);var o=n.getIn([\"call_price\",\"quote\",\"asset_id\"]);i[o]?i[o]+=parseInt(n.get(\"debt\"),10):i[o]=parseInt(n.get(\"debt\"),10)}});var m=e.get(\"balances\");e.get(\"balances\")&&m.forEach(function(e){var t=b.ChainStore.getObject(e);if(!t||!t.get(\"balance\"))return null;f=f.push(e)});var d=_.a.isMyAccount(e)||p===u,g=c.has(p),w=g?\"gold-star\":\"grey-star\";return r.a.createElement(\"tr\",{key:p},r.a.createElement(\"td\",{className:\"clickable\",onClick:n._onStar.bind(n,p,g)},r.a.createElement(y.a,{className:w,name:\"fi-star\",title:\"icons.fi_star.account\"})),l?t&&r.a.createElement(\"td\",{onClick:n._onAddContact.bind(n,p)},r.a.createElement(y.a,{name:\"plus-circle\",title:\"icons.plus_circle.add_contact\"}))||r.a.createElement(\"td\",{onClick:n._onRemoveContact.bind(n,p)},r.a.createElement(y.a,{name:\"minus-circle\",title:\"icons.minus_circle.remove_contact\"})):null,r.a.createElement(\"td\",{style:{textAlign:\"left\"}},e.get(\"id\")),r.a.createElement(\"td\",{style:{textAlign:\"left\",paddingLeft:10},onClick:n._goAccount.bind(n,p,0),className:\"clickable\"+(d?\" my-account\":\"\")},r.a.createElement(\"span\",{className:h?\"lifetime\":\"\"},p)),r.a.createElement(\"td\",{className:\"clickable\",onClick:n._goAccount.bind(n,p,1),style:{textAlign:\"right\"}},r.a.createElement(v.a,{noTip:!0,balances:[],openOrders:s})),o>=750?r.a.createElement(\"td\",{className:\"clickable\",onClick:n._goAccount.bind(n,p,2),style:{textAlign:\"right\"}},r.a.createElement(v.a,{noTip:!0,balances:[],collateral:a})):null,o>=1200?r.a.createElement(\"td\",{className:\"clickable\",onClick:n._goAccount.bind(n,p,2),style:{textAlign:\"right\"}},r.a.createElement(v.a,{noTip:!0,balances:[],debt:i})):null,r.a.createElement(\"td\",{className:\"clickable\",onClick:n._goAccount.bind(n,p,0),style:{textAlign:\"right\"}},r.a.createElement(v.a,{noTip:!0,balances:f,collateral:a,debt:i,openOrders:s})))}})}},{key:\"render\",value:function(){var e=this.props,t=e.width,n=e.showIgnored,a=e.isContactsList,o=this.state.dashboardFilter,i=this._renderList(this.props.accounts),s=this._renderList(this.props.ignoredAccounts,!0),c=a?E.a.translate(\"explorer.accounts.filter_contacts\"):E.a.translate(\"explorer.accounts.filter\");c+=\"...\";var u=!!k.a.getWallet();return r.a.createElement(\"div\",{style:this.props.style},this.props.compact?null:r.a.createElement(\"section\",{style:{paddingTop:\"1rem\",paddingLeft:\"2rem\"}},r.a.createElement(\"input\",{placeholder:c,style:{maxWidth:\"20rem\",display:\"inline-block\"},type:\"text\",value:o,onChange:this._onFilter.bind(this)}),u&&!a?r.a.createElement(\"div\",{onClick:this._createAccount.bind(this),style:{display:\"inline-block\",marginLeft:5,marginBottom:\"1rem\"},className:\"button small\"},r.a.createElement(l.a,{content:\"header.create_account\"})):null,s&&s.length?r.a.createElement(\"div\",{onClick:this.props.onToggleIgnored,style:{display:\"inline-block\",float:\"right\",marginRight:\"20px\"},className:\"button small\"},r.a.createElement(l.a,{content:\"account.\"+(this.props.showIgnored?\"hide_ignored\":\"show_ignored\")})):null),r.a.createElement(\"table\",{className:\"table table-hover dashboard-table\",style:{fontSize:\"0.85rem\"}},this.props.compact?null:r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",{onClick:this._setSort.bind(this,\"star\"),className:\"clickable\"},r.a.createElement(y.a,{className:\"grey-star\",name:\"fi-star\",title:\"icons.fi_star.sort_accounts\"})),a?r.a.createElement(\"th\",null,r.a.createElement(y.a,{name:\"user\",title:\"icons.user.account\"})):null,r.a.createElement(\"th\",{style:{textAlign:\"left\"}},\"ID\"),r.a.createElement(\"th\",{style:{textAlign:\"left\",paddingLeft:10},onClick:this._setSort.bind(this,\"name\"),className:\"clickable\"},r.a.createElement(l.a,{content:\"header.account\"})),r.a.createElement(\"th\",{style:{textAlign:\"right\"}},r.a.createElement(l.a,{content:\"account.open_orders\"})),t>=750?r.a.createElement(\"th\",{style:{textAlign:\"right\"}},r.a.createElement(l.a,{content:\"account.as_collateral\"})):null,t>=1200?r.a.createElement(\"th\",{style:{textAlign:\"right\"}},r.a.createElement(l.a,{content:\"transaction.borrow_amount\"})):null,r.a.createElement(\"th\",{style:{textAlign:\"right\",marginRight:20}},r.a.createElement(l.a,{content:\"account.total_value\"})))),r.a.createElement(\"tbody\",null,i,n&&s.length?r.a.createElement(\"tr\",{className:\"dashboard-table--hiddenAccounts\",style:{backgroundColor:\"transparent\"},key:\"hidden\"},r.a.createElement(\"td\",{colSpan:\"8\"},E.a.translate(\"account.hidden_accounts_row\"),\":\")):null,n&&s)))}}]),t}();T.propTypes={accounts:m.a.ChainAccountsList.isRequired,ignoredAccounts:m.a.ChainAccountsList},T.defaultProps={width:2e3,compact:!1},T=Object(d.a)(T);var j=function(e){function t(){return O(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,r.a.Component),S(t,[{key:\"render\",value:function(){return r.a.createElement(T,this.props)}}]),t}();j=Object(A.a)(j);var N=Object(u.a)(j,{listenTo:function(){return[p.a,h.a,_.a]},getProps:function(){return{locked:h.a.getState().locked,starredAccounts:_.a.getState().starredAccounts,viewSettings:p.a.getState().viewSettings}}}),P=n(2192),L=n(44),I=n(2205),H=n(182),D=n(2176),R=n(117),F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},B=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function z(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function M(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function q(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var W=function(e){function t(){return z(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return q(t,r.a.Component),B(t,[{key:\"render\",value:function(){return r.a.createElement(R.a,{stores:[_.a,p.a,H.a],inject:{contacts:function(){return _.a.getState().accountContacts},myActiveAccounts:function(){return _.a.getState().myActiveAccounts},myHiddenAccounts:function(){return _.a.getState().myHiddenAccounts},accountsReady:function(){return _.a.getState().accountsLoaded&&_.a.getState().refsLoaded},passwordAccount:function(){return _.a.getState().passwordAccount},currentEntry:p.a.getState().viewSettings.get(\"dashboardEntry\",\"accounts\")}},r.a.createElement(V,this.props))}}]),t}(),V=function(e){function t(e){z(this,t);var n=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={width:null,showIgnored:!1,currentEntry:e.currentEntry},n._setDimensions=n._setDimensions.bind(n),n}return q(t,r.a.Component),B(t,[{key:\"componentDidMount\",value:function(){this._setDimensions(),window.addEventListener(\"resize\",this._setDimensions,{capture:!1,passive:!0})}},{key:\"shouldComponentUpdate\",value:function(e,t){return e.myActiveAccounts!==this.props.myActiveAccounts||e.contacts!==this.props.contacts||e.ignoredAccounts!==this.props.ignoredAccounts||e.passwordAccount!==this.props.passwordAccount||t.width!==this.state.width||e.accountsReady!==this.props.accountsReady||t.showIgnored!==this.state.showIgnored||t.currentEntry!==this.state.currentEntry}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this._setDimensions)}},{key:\"_setDimensions\",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:\"_onToggleIgnored\",value:function(){this.setState({showIgnored:!this.state.showIgnored})}},{key:\"_onSwitchType\",value:function(e){this.setState({currentEntry:e}),f.a.changeViewSetting({dashboardEntry:e})}},{key:\"render\",value:function(){var e=this.props,t=e.myActiveAccounts,n=e.myHiddenAccounts,a=e.accountsReady,o=e.passwordAccount,s=this.state,c=s.width,l=s.showIgnored;o&&!t.has(o)&&(t=t.add(o));var u=t.toArray().sort();o&&-1===u.indexOf(o)&&u.push(o);var p=n.toArray().sort(),h=t.size+n.size+(o?1:0);if(!a)return r.a.createElement(L.a,null);if(!h)return r.a.createElement(I.a,null);var m=this.props.contacts.toArray();return r.a.createElement(\"div\",{ref:\"wrapper\",className:\"grid-block page-layout vertical\"},r.a.createElement(\"div\",{ref:\"container\",className:\"tabs-container generic-bordered-box\"},r.a.createElement(D.b,{setting:\"accountTab\",className:\"account-tabs\",defaultActiveTab:1,segmented:!1,tabsClass:\"account-overview no-padding bordered-header content-block\"},r.a.createElement(D.a,{title:\"account.accounts\"},r.a.createElement(\"div\",{className:\"generic-bordered-box\"},r.a.createElement(\"div\",{className:\"box-content\"},r.a.createElement(N,{accounts:i.a.List(u),ignoredAccounts:i.a.List(p),width:c,onToggleIgnored:this._onToggleIgnored.bind(this),showIgnored:l,showMyAccounts:!0})))),r.a.createElement(D.a,{title:\"account.contacts\"},r.a.createElement(\"div\",{className:\"generic-bordered-box\"},r.a.createElement(\"div\",{className:\"box-content\"},r.a.createElement(N,{accounts:m,passwordAccount:o,ignoredAccounts:i.a.List(p),width:c,onToggleIgnored:this._onToggleIgnored.bind(this),showIgnored:l,isContactsList:!0})))),r.a.createElement(D.a,{title:\"account.recent\"},r.a.createElement(P.a,{accountsList:t,limit:10,compactView:!1,fullHeight:!0,showFilters:!0,dashboard:!0})))))}}]),t}();t.default=function(e){return r.a.createElement(W,F({},e,{onlyAccounts:!0}))}}}]);"],"mappings":"AAAA","sourceRoot":""}